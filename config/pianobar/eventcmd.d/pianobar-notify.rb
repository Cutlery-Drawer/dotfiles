#!/usr/bin/ruby require 'open-uri'require 'tempfile' def cover_art url  extname = File.extname(url)  basename = File.basename(url, extname)  file = Tempfile.new([basename, extname])  file.binmode  open(URI.parse(url)) { |data| file.write data.read }  fileend trigger = ARGV.shiftif trigger == 'songstart'  # Get current song information  songinfo = {}  STDIN.each_line { |line| songinfo.store(*line.chomp.split('=', 2)) }   # Grab cover art and send growl notification  image = cover_art(songinfo['coverArt'])  `growlnotify -t "Pianobar: Now Playing" -m "#{songinfo['title']}\nby #{songinfo['artist']}" --image "#{image.path}"`   # Clean up cover art temp file  image.unlink  image.closeend